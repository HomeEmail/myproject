<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit"><!-- 国产双核浏览器，启用极速模式 -->
<meta name="HandheldFriendly" content="true" />
<meta name="MobileOptimized" content="320" />
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="full-screen" content="yes">
<meta name="browsermode" content="application">
<meta name="x5-orientation" content="portrait">
<meta name="x5-fullscreen" content="true">
<meta name="x5-page-mode" content="app">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0,minimal-ui" />
<meta name="description" content="" />
<meta name="author" content="" />

<meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<link rel="stylesheet" href="./css/base.css?v=66" />
<style type="text/css">
body,html{
	position: relative;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	height: 100%;
	width: 100%;
	background-color: #ffffff;
	-webkit-overflow-scrolling: auto;
	overflow: hidden;
	z-index: 0;
}
#main{
	position: absolute;
	left: 0%;
	top: 10%;
	right: 0%;
	bottom: 10%;
	width: 100%;
	height: 80%;
	text-align: center;
	background-color: #ddd;
	z-index: 10;
}
.wrapper{
	/**局部有滚动**/
	position: static;
	height: 100%;
	width: 100%;
    -webkit-overflow-scrolling: touch;
	overflow: auto;
}
.sub-wrapper{
	min-height: calc(100% + 1px);
	padding: 20px;
}
.sub-wrapper p{
	margin:10px;
	background-color: #eee;
	color: #222;
	line-height: 30px;
}

/**原理上还是使用3d效果来开启硬件加速**/
.speed-up{
   -webkit-transform: translateZ(0);
   -moz-transform: translateZ(0);
   -ms-transform: translateZ(0);
   -o-transform: translateZ(0);
   transform: translateZ(0);
}


</style>
<!-- <script type="text/javascript" src="./js/hammer.js"></script>
 -->
<script type="text/javascript" src="./js/zepto.min.js"></script>

<title>滚动回弹测试</title>
</head>
<body>


<div id="main">
<div class="wrapper">
	<div class="sub-wrapper">
		<div class="scroller">
			<p>这种组织全局滚动方式不好,目前没有完美的方式，用滚动插件吧 sdf df dsfsdf df dsfdf </p>
			<p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p><p>sdfdfsf sdf df dsfsdf df dsfdf </p>

		</div>
	</div>
	
</div>
</div>


<script type="text/javascript">
document.addEventListener('touchmove', function (e) { 
	//var target = e.target
	
	e.preventDefault(); //阻止默认的处理方式(阻止下拉滑动的效果)

},{passive: false});//passive 参数不能省略，用来兼容ios和android

function isScroller(el) {
  // 判断元素是否为 scroller
  return el.classList.contains('scroller')
}

document.body.addEventListener('touchmove', function (e) {
	var target = e.target

  // 在 scroller 上滑动，阻止事件冒泡，启用浏览器默认行为。
  if (isScroller(target)) {
    e.stopPropagation()
  }
}, false); 

// 作者：song
// 链接：https://www.zhihu.com/question/22256539/answer/357240488
// 来源：知乎
// 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。



//完美解决safari、微信浏览器下拉回弹效果，只保留局部回弹效果。
/*var overscroll = function(el) {
    el.addEventListener('touchstart', function(evt) {
        var top = el.scrollTop
        ,totalScroll = el.scrollHeight
        ,currentScroll = top + el.offsetHeight;
        if(top === 0) {
            el.scrollTop = 1;
        }else if(currentScroll === totalScroll) {
            el.scrollTop = top - 1;
        }
    });

    el.addEventListener('touchmove', function(evt) {
    if(el.offsetHeight < el.scrollHeight)
        evt._isScroller = true;
    });
}
       
overscroll(document.querySelector('#main'));

document.body.addEventListener('touchmove', function(evt) {
    if(!evt._isScroller) {
        evt.preventDefault();
    }
});*/

</script>

</body>
</html>