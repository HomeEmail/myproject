<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit"><!-- 国产双核浏览器，启用极速模式 -->
<meta name="HandheldFriendly" content="true" />
<meta name="MobileOptimized" content="320" />
<meta name="format-detection" content="telephone=no">
<meta name="format-detection" content="email=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="full-screen" content="yes">
<meta name="browsermode" content="application">
<meta name="x5-orientation" content="portrait">
<meta name="x5-fullscreen" content="true">
<meta name="x5-page-mode" content="app">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0,minimal-ui" />
<meta name="description" content="" />
<meta name="author" content="" />

<meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<link rel="stylesheet" href="./css/base.css?v=66" />
<style type="text/css">
body,html{
	overflow: hidden;
	/*position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	height: 100%;
	width: 100%;
	-webkit-overflow-scrolling: auto;
	overflow: hidden;*/
}
#main{
	position: absolute;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	width: 100%;
	height: 500px;
	text-align: center;
	background-color: #eee;
	z-index: 0;
	/**局部有滚动**/
	overflow: auto;
    -webkit-overflow-scrolling: touch;
}


</style>
<!-- <script type="text/javascript" src="./js/hammer.js"></script>
 -->
<script type="text/javascript" src="./js/zepto.min.js"></script>

<title>滚动回弹测试</title>
</head>
<body>


<div id="main">

	

</div>


<script type="text/javascript">
document.body.addEventListener('touchmove', function (e) { 
	e.preventDefault();

},false);

/**
 * 禁止浏览器下拉回弹
 */
// function stopDrop() {
//     var lastY;//最后一次y坐标点
//     $(document.body).on('touchstart', function(event) {
//         lastY = event.originalEvent.changedTouches[0].clientY;//点击屏幕时记录最后一次Y度坐标。
//     });
//     $(document.body).on('touchmove', function(event) {
//         var y = event.originalEvent.changedTouches[0].clientY;
//         var st = $(this).scrollTop(); //滚动条高度
//         console.log("st = "+st);
//         if (y >= lastY && st <= 0) {//如果滚动条高度小于0，可以理解为到顶了，且是下拉情况下，阻止touchmove事件。
//             lastY = y;
//             event.preventDefault();
//         }
//         lastY = y;

//         //方法三
//         // var abc=$(document.body).scrollTop();
//         // console.log("abc = "+abc);
//         // if (abc>0) {
//         //   $(document.body).scrollTop(0);
//         // }
//     });
// }
// stopDrop();


//完美解决safari、微信浏览器下拉回弹效果，只保留局部回弹效果。
/*var overscroll = function(el) {
    el.addEventListener('touchstart', function(evt) {
        var top = el.scrollTop
        ,totalScroll = el.scrollHeight
        ,currentScroll = top + el.offsetHeight;
        if(top === 0) {
            el.scrollTop = 1;
        }else if(currentScroll === totalScroll) {
            el.scrollTop = top - 1;
        }
    });

    el.addEventListener('touchmove', function(evt) {
    if(el.offsetHeight < el.scrollHeight)
        evt._isScroller = true;
    });
}
       
overscroll(document.querySelector('#main'));

document.body.addEventListener('touchmove', function(evt) {
    if(!evt._isScroller) {
        evt.preventDefault();
    }
});*/

</script>

</body>
</html>